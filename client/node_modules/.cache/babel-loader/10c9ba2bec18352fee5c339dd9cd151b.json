{"ast":null,"code":"var _jsxFileName = \"/home/rubencalzacorta/Desktop/personal_projects/yourtime/client/src/pages/Results/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Container, CircularProgress } from \"@material-ui/core\"; //queryString en una dependencia que viene ya instalada que sirve para comvertir querystrings in objetos\n\nimport queryString from \"query-string\";\nimport { searchMovie } from \"../../redux/actions/search\";\nimport MovieResult from \"../../components/MovieResult\"; //importar selectores\n\nimport { movieResults, isSearchLoading } from \"../../redux/selectors\"; //{location} is a decomposition from the property location fo the object props\n\nexport default (({\n  location\n}) => {\n  //instanciar el dispatch\n  const dispatch = useDispatch();\n  const movies = useSelector(state => movieResults(state));\n  const isLoading = useSelector(state => isSearchLoading(state));\n  const [isLooked, setIsLooked] = useState(false);\n  console.log(movies); //use effect recibe un callback que se va a ejecutar cada vez que se monte el componente - el equivalente a component did mount\n\n  useEffect(() => {\n    //queryString.parse crea un objeto de un query estring. el querystring siempre esta en props.location.search\n    const {\n      movieName\n    } = queryString.parse(location.search); //only fires the dispatch accion when there is no movie list and when you have the name of the movie to look for \n\n    if (movieName && !isLooked) {\n      setIsLooked(true); //dispatch se usa para llamar a una accion. en este caso searchMovie que llama a la api\n\n      dispatch(searchMovie({\n        movieName\n      }));\n    }\n  });\n\n  const renderMovies = () => {\n    if (movies) {\n      return movies.map((elm, idx) => /*#__PURE__*/React.createElement(MovieResult, Object.assign({\n        key: idx\n      }, elm, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 45\n        }\n      })));\n    } else if (isLoading) {\n      return /*#__PURE__*/React.createElement(CircularProgress, {\n        size: 100,\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 20\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 20\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, renderMovies());\n});","map":{"version":3,"sources":["/home/rubencalzacorta/Desktop/personal_projects/yourtime/client/src/pages/Results/index.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Container","CircularProgress","queryString","searchMovie","MovieResult","movieResults","isSearchLoading","location","dispatch","movies","state","isLoading","isLooked","setIsLooked","console","log","movieName","parse","search","renderMovies","map","elm","idx"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,SAAT,EAAoBC,gBAApB,QAA4C,mBAA5C,C,CACA;;AACA,OAAOC,WAAP,MAAwB,cAAxB;AAEA,SAASC,WAAT,QAA4B,4BAA5B;AACA,OAAOC,WAAP,MAAwB,8BAAxB,C,CAEA;;AACA,SAASC,YAAT,EAAuBC,eAAvB,QAA8C,uBAA9C,C,CACA;;AACA,gBAAe,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAE7B;AACA,QAAMC,QAAQ,GAAGV,WAAW,EAA5B;AACA,QAAMW,MAAM,GAAGV,WAAW,CAACW,KAAK,IAAIL,YAAY,CAACK,KAAD,CAAtB,CAA1B;AACA,QAAMC,SAAS,GAAGZ,WAAW,CAACW,KAAK,IAAIJ,eAAe,CAACI,KAAD,CAAzB,CAA7B;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0BhB,QAAQ,CAAC,KAAD,CAAxC;AAEAiB,EAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ,EAR6B,CAU7B;;AACAb,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA,UAAM;AAAEoB,MAAAA;AAAF,QAAgBd,WAAW,CAACe,KAAZ,CAAkBV,QAAQ,CAACW,MAA3B,CAAtB,CAFY,CAIZ;;AACA,QAAIF,SAAS,IAAI,CAACJ,QAAlB,EAA4B;AACxBC,MAAAA,WAAW,CAAC,IAAD,CAAX,CADwB,CAExB;;AACAL,MAAAA,QAAQ,CAACL,WAAW,CAAC;AAAEa,QAAAA;AAAF,OAAD,CAAZ,CAAR;AACH;AACJ,GAVQ,CAAT;;AAYA,QAAMG,YAAY,GAAG,MAAM;AACvB,QAAIV,MAAJ,EAAY;AACR,aAAOA,MAAM,CAACW,GAAP,CAAW,CAACC,GAAD,EAAMC,GAAN,kBAAc,oBAAC,WAAD;AAAa,QAAA,GAAG,EAAEA;AAAlB,SAA2BD,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAzB,CAAP;AACH,KAFD,MAEO,IAAIV,SAAJ,EAAe;AAClB,0BAAO,oBAAC,gBAAD;AAAkB,QAAA,IAAI,EAAE,GAAxB;AAA6B,QAAA,KAAK,EAAC,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH,KAFM,MAEA;AACH,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;AACJ,GARD;;AAUA,sBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKQ,YAAY,EADjB,CADJ;AAMH,CAvCD","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Container, CircularProgress } from \"@material-ui/core\"\n//queryString en una dependencia que viene ya instalada que sirve para comvertir querystrings in objetos\nimport queryString from \"query-string\"\n\nimport { searchMovie } from \"../../redux/actions/search\"\nimport MovieResult from \"../../components/MovieResult\"\n\n//importar selectores\nimport { movieResults, isSearchLoading } from \"../../redux/selectors\"\n//{location} is a decomposition from the property location fo the object props\nexport default ({ location }) => {\n\n    //instanciar el dispatch\n    const dispatch = useDispatch()\n    const movies = useSelector(state => movieResults(state))\n    const isLoading = useSelector(state => isSearchLoading(state))\n    const [isLooked, setIsLooked] = useState(false)\n\n    console.log(movies)\n\n    //use effect recibe un callback que se va a ejecutar cada vez que se monte el componente - el equivalente a component did mount\n    useEffect(() => {\n        //queryString.parse crea un objeto de un query estring. el querystring siempre esta en props.location.search\n        const { movieName } = queryString.parse(location.search)\n\n        //only fires the dispatch accion when there is no movie list and when you have the name of the movie to look for \n        if (movieName && !isLooked) {\n            setIsLooked(true)\n            //dispatch se usa para llamar a una accion. en este caso searchMovie que llama a la api\n            dispatch(searchMovie({ movieName }))\n        }\n    })\n\n    const renderMovies = () => {\n        if (movies) {\n            return movies.map((elm, idx) => <MovieResult key={idx} {...elm} />)\n        } else if (isLoading) {\n            return <CircularProgress size={100} color=\"primary\" />\n        } else {\n            return <div />\n        }\n    }\n\n    return (\n        <Container>\n            {renderMovies()}\n        </Container>\n    )\n\n}"]},"metadata":{},"sourceType":"module"}